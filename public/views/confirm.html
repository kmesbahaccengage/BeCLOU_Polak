<!DOCTYPE html>
<html>
<head>
	<title>Confirm</title>
</head>
<body>

</body>
<script type="text/javascript">
	async function confirm(e){
            e.preventDefault();
            // on set l'url de l'api register
            let url = '/api/user/confirm';
            // on procède au call api en précisant la METHOD et en envoyant comme body l'objet data en json string que l'on a cré plus haut
             // on précise aussi le contenu du body dans le header en lui disant qu'il va recevoir du json
            let res = await fetch(url, {
                method: 'POST',
                body: JSON.stringify({hash:req.query.hash}),
                headers: {
                    'Content-Type': 'application/json'
                }
            });
            // dès que l'appel est terminé, on check le status de la réponse, si 200 c'est que tout s'est bien passé
             // du coup si y a eu un 200, on peut continuer notre script
             // si autre que 200, y a eu une erreur et on doit le refaire faire le formulaire d'inscription
            if (res.status === 200) {
                let response = await res.json();
                alert("User confirmed ");
                res.sendFile(path.join(__dirname + '/public/views/login.html'));
            } else alert(res.status + " " + await res.text());
            return false;
</script>
</html>